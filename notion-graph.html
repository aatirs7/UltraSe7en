<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>UltraSe7en â€” Knowledge Graph</title>
  <link rel="stylesheet" href="/notion-graph.css" />
  <!-- Three.js -->
  <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
  <!-- 3D Force Graph -->
  <script src="https://unpkg.com/3d-force-graph@1.73.3/dist/3d-force-graph.min.js"></script>
</head>

<body>
  <div class="graph-app">
    <!-- Header -->
    <header class="graph-header">
      <div class="header-left">
        <a class="back-btn" href="/notion.html" title="Back to Notes">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Notes
        </a>
        <div class="graph-title">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="6" cy="6" r="3"/><circle cx="18" cy="6" r="3"/><circle cx="18" cy="18" r="3"/><circle cx="6" cy="18" r="3"/>
            <path d="M8.5 8.5L15.5 15.5M15.5 8.5L8.5 15.5"/>
          </svg>
          Knowledge Graph
        </div>
      </div>

      <div class="header-right">
        <div class="search-box">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/>
          </svg>
          <input type="text" id="graphSearch" placeholder="Search nodes..." autocomplete="off" />
        </div>
        <button class="ctrl-btn" id="fitBtn" title="Fit all nodes">Fit</button>
        <button class="ctrl-btn" id="resetBtn" title="Reset view">Reset</button>
        <button class="ctrl-btn" id="themeBtn" title="Toggle theme">Theme</button>
      </div>
    </header>

    <!-- 3D Graph Container -->
    <div id="graphContainer" class="graph-container"></div>

    <!-- Node Details Panel -->
    <div class="details-panel hidden" id="detailsPanel">
      <div class="details-header">
        <div class="details-title" id="detailsTitle">Page Title</div>
        <button class="details-close" id="detailsClose">&times;</button>
      </div>
      <div class="details-tags" id="detailsTags"></div>
      <div class="details-preview" id="detailsPreview"></div>
      <a class="details-link" id="detailsLink" href="#">Open Page</a>
    </div>

    <!-- Legend -->
    <div class="legend">
      <div class="legend-item">
        <span class="legend-dot category"></span>
        Category
      </div>
      <div class="legend-item">
        <span class="legend-dot page"></span>
        Page
      </div>
    </div>

    <!-- Stats -->
    <div class="stats" id="stats">
      <span id="nodeCount">0</span> nodes &middot; <span id="linkCount">0</span> links
    </div>
  </div>

  <script src="/notion-graph.js"></script>
</body>
</html>
